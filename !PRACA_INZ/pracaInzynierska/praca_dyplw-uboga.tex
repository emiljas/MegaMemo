%
% Szablon, v. 2.0
% p.wlaz@pollub.pl
%



\documentclass[11pt, openany]{mwbk}


%%%%%%% marinesy, rozmiary, to warto dopasowaÊ do drukarki
\usepackage[a4paper,twoside,top=2.6cm,bottom=2.6cm,inner=3cm,outer=2.6cm]{geometry}

%%%%%%%% polszczyzna
\usepackage[OT4]{polski}


%%%%%%%%% sposÛb kodowania literek w edytorze
\usepackage[cp1250]{inputenc}

\usepackage[font=small,labelfont=bf,justification=centering]{caption}


%%%% gdyby ktoú chcia≥ powyklejaÊ z~pedeefa
%%%% teksty za pomocπ AcroReadera, to cmap.sty
%%%% pomoøe w~prawid≥owym dzia≥aniu z~polskimi literkami
%%%% Moøe to byÊ przydatne, gdyby ktoú na podstawie
%%%% elektronicznej wersji chcia≥ przygotowaÊ dane do 
%%%% badania antyplagiatowego
%% \usepackage{cmap}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% jeúli chcesz by g≥Ûwny tekst oraz wzory matematyczne by≥y
%%%%% sk≥adane czcionkπ typu Times Roman (w~odrÛønieniu od standardowej
%%%%% TeXowej, czyli Computer Modern Roman) to linia poniøej
%%%%% ma byÊ 'aktywna', jeú≥i postawisz na jej poczπtku znak %
%%%%% to uzyskasz sk≥ad tπ tradycyjnπ czcionkπ typu 
%%%%% Computer Modern Roman majπcπ wielu wiernych
%%%%% fanÛw w~úwiecie TeXa). Konsekwencjπ jednak bÍdπ zmiany
%%%%% rozmiarÛw czcionek dla rozdzia≥Û i podrozdzia≥Ûw - rzecz bez wiÍkszego
%%%%% znaczenia, wynikajπca z pewnych zasz≥oúci historycznych (ComputerModern
%%%%% niegdyú by≥y uøywane wy≥πcznie w postaci tzw. bitmap)
%% \usepackage{mathptmx} \usepackage{tgtermes}




%%%%%%%%%%%%%% pozosta≥e pakiety uøywane w~pracy, to juø zaleøy od
%%%%%%%%%%%%%% autora, wiÍc moøe byÊ tego wiÍcej
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{url}
\usepackage{longtable}
\usepackage{array,hhline}

%%%%%%%% hyperref po to by przeglπdarka pedeef ukazywala na odwo≥ania
%%%%%%%% prawid≥owo skonstruowane za pomocπ \ref, \cite i.t.d. jako
%%%%%%%% hiper≥πcza
%% \usepackage{hyperref}



%%%%% dla fanÛw ``profesjonalnych'' tabel w~stylu zachodnich ksiπøek

\usepackage{booktabs} \heavyrulewidth=1.5bp \lightrulewidth=0.5bp


%%%%%%%%%%% poniøej uniwersalny sposÛb na ucywilizowanie znakÛw 
%%%%%%%%%%% niewiÍkszoúci, niezaleøny od pakietu {polski}, ale za to 
%%%%%%%%%%% zaleøny od {amssymb}, ma tπ zaletÍ, øe dzia≥a np. z Timesem
%%%%%%%%%%% w matematyce
\let\leq\leqslant\let\le\leq\let\geq\geqslant\let\ge\geq


%%%%%%% jeøeli bÍdziesz chcia≥ w≥πczaÊ do swojej pracy fragmenty programÛw, 
%% to kilka ponizszych linijek przyda siÍ, jeúli nie - usuÒ je
\usepackage{listingsutf8}
\usepackage{color}
\definecolor{siwy}{gray}{0.95}
\lstset{extendedchars=true, inputencoding=utf8/latin2, language=octave,
	basicstyle=\footnotesize, frame=single,
	backgroundcolor=\color{siwy},
	numbers=left, numberstyle=\tiny\bf, numbersep=5pt, stepnumber=1}


%%%%%%%%%%%%%%%%% struktury do tworzenia twierdzeÒ i~tym podobnych

\theoremstyle{plain}
\newtheorem{twier}{Twierdzenie}[chapter] % pierwsze to nazwa úrodowiska,
                                      %drugie to wyúwietlana nazwa
				% to trzecie w~nawiasie kwadratowym
				% wskazuje numer dolepiony z~lewej do
				% numeru twierdzenia (tu numer
				% 'chapter', 
\newtheorem{lemat}{Lemat}[chapter]

\theoremstyle{definition}
\newtheorem{defi}{Definicja}[chapter]

\theoremstyle{remark}
\newtheorem{uwaga}{Uwaga}[chapter]
\newtheorem{wniosek}{Wniosek}[chapter]

%%%%% wiÍcej moøliwoúci w~dokumentacji amsthm



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%% wciÍcie akapitowe %%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% ustawiÊ w~zaleceÒ i~gustu %%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%% zalecenie na stronie wydzia≥owej
%%%%%%%% by≥o 1.25cm i wyglπda≥o jakoú 
%%%%%%%% úmiesznie duøe, wiÍc sp≥oszony nieco
%%%%%%%% wpisa≥em 1cm, ale uwaøny czytelnik juø
%%%%%%%% zapewne siÍ domyúli, øe podmiana napisu 
%%%%%%%% =1cm na =1.25cm sprawi, øe wciÍcia na poczπtku
%%%%%%%% akapitu ustawiπ siÍ na (nieco przyduøπ)
%%%%%%%% wartoúÊ 1.25cm 

\parindent=1cm



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% tu pewne poluzowanie rozmieszczenia elementÛw tabelek
%%%%% moøecie sobie poeksperymentowaÊ, by dopasowaÊ do swych
%%%%% gustÛw, a przede wszystkim gustÛw promotorÛw (promotorek)
  \tabcolsep=4mm          
  %\renewcommand\arraystretch{1.3}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%% teraz øywa pagina (aka 'running headline') i~numerowanie stron
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%na gÛrze majπ byÊ úrÛdtytu≥y, na dole (po stronie zewneÍtrznej)
%%%%%numery stron. Poszed≥em kapkÍ dalej i~na stronach ropoczynajπcych
%%%%%rozdzia≥ nie ma paginy (gÛrki).
%%%%% Oczywiúcie jeúli ostatnia strona
%%%%% jest pusta (uzupe≥nia jeno parzystoúÊ) to tam øadnej stopki ani 
%%%%% gÛrki byc mnie moøe - ma byÊ pusta.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{fancy}
\fancyhead{}% oczyszczenie
\fancyhead[RO]{\rightmark} %% na nieparzystych 'podleg≥e' úrÛdtytu≥y
\fancyhead[LE]{\leftmark} %% na parzystych 'waøniejsze'
\fancyfoot{}% oczyszczenie
\fancyfoot[RO,LE]{\arabic{page}}  %% numer na dole (po prawej na
%% nieparzystych, po lewej na parzystych)
\renewcommand\headrulewidth{0.4pt} %%% cienka hrulka oddzielajπca paginÍ
                                    %%% od kolumny tekstu
\fancypagestyle{closing}{%%%%%% to styl dla stron zamykajπcych rozdzia≥
\fancyhead{}% oczyszczenie
\fancyhead[RO]{\rightmark} %% na nieparzystych 'podleg≥e'
\fancyhead[LE]{\leftmark} %% na parzystych 'waøniejsze'
\fancyfoot{}% oczyszczenie
\fancyfoot[RO,LE]{\arabic{page}}  %% numer na dole (po prawej na
                                  %% powyøszπ linijkÍ usuÒ jeúli nie
				  %% chcesz numerÛw na niepe≥nych
				  %% kolumnach (zamykajπcych rozdzia≥)
\renewcommand\headrulewidth{0.4pt}
}
\fancypagestyle{opening}{%%% styl stron rozpoczynajπcych rozdzia≥
\fancyhead{}% oczyszczenie
\fancyfoot{}% oczyszczenie
\fancyfoot[RO,LE]{\arabic{page}}  %% numer na dole (po prawej na
\renewcommand\headrulewidth{0pt}
}
\fancypagestyle{plain}{%%%% styl zwyk≥y, niektÛre konstrukcje
                       %%%% (typu \titlepage, ktÛrego ja tu nie uøywam
                       %%%% ale moøe sπ jakieú inne o ktÛrych nawet nie chce 
                       %%% mi siÍ myúleÊ, wiÍc dla spokoju robiÍ to po swojemu
\fancyhead{}% oczyszczenie
\fancyfoot{}% oczyszczenie
\fancyfoot[RO,LE]{\arabic{page}}  %% numer na dole (po prawej na
\renewcommand\headrulewidth{0pt}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% lekka modyfikcja 'markow' do paginy
%%% uznalem, ze jesli ktos nie da \section (np we wstepnie czy
%%% podsumowaniu to niech na obu sronach w~paginie pojawia sie tytu≥
%%% chaptera, bo standardowo, to na nieparzystej stronie w takiej sytuacji
%%% nad gÛrnπ liniπ zia≥aby pustka, co mog≥oby wprowadzaÊ konsternacjÍ
\makeatletter
    \def\chaptermark#1{%
      \markboth{%
        \ifHeadingNumbered
     \if@mainmatter
     \@chapapp\
            \thechapter.\enspace
          \fi
        \fi
        #1}{%
        \ifHeadingNumbered
     \if@mainmatter
     \@chapapp\
            \thechapter.\enspace
          \fi
        \fi
        #1%
	}}%
    \def\sectionmark#1{%
      \markright{%
        \ifHeadingNumbered \thesection.\enspace \fi
        #1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%% wielkoúci czcionek dla chapter i~section
%%%%%%%%%%%% 16 dla rozdzia≥u, 14 dla podrozdzia≥u - te domyúlne
%%%%%%%%%%%% w klasie mwbk by≥y ca≥kiem ≥adne, ale øeby nie by≥o
%%%%%%%%%%%% øe nie potrafiÍ ustawiÊ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\SetSectionFormatting[breakbefore,wholewidth]{chapter}
        {0\p@}
        {\FormatRigidChapterHeading{6.4\baselineskip}{12\p@}%
	{\large\@chapapp\space}{\fontsize{16}{19}\selectfont}}
        {1.6\baselineskip}
\SetSectionFormatting{section}
        {24\p@\@plus5\p@\@minus2\p@}
	{\FormatHangHeading{\fontsize{14}{16}\selectfont}}
        {10\p@\@plus3\p@}
\makeatother	



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%% jakies inne pomocnicze definicje, ja na przyk≥ad lubiÍ
% \R
%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%%
%%%% tak naprawdÍ sπ t potrzebne tylko po to
%%%% by zadzia≥a≥y przyk≥ady poniøej w tekúcie
%%%% ktÛre w sposÛb doúÊ losowy zosta≥y 
%%%% pobrane z jakichú moich starych plikÛw
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% w realnej pracy te poniøsze úmieci moøecie oczywiúcie
%%%% usunπÊ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\R{\mathbb{R}}
\newcommand{\ff}{\mathbf{f}}
\newcommand{\hh}{\mathbf{h}}
\newcommand{\xx}{\mathbf{x}}
\newcommand{\yy}{\mathbf{y}}
\newcommand{\zz}{\mathbf{z}}
\newcommand{\gggg}{\mathbf{g}}
\newcommand{\skalar}[2]{\pmb{\langle}#1,#2\pmb{\rangle}}
%%%%%%%%%%%% koniec tych dodatkowych definicji

%%%%%% trocÍ wiÍcej ``luzu'' przy rozmieszczaniu {fgur} i~{table}

 \renewcommand{\topfraction}{0.9}	% max fraction of floats at top
    \renewcommand{\bottomfraction}{0.8}	% max fraction of floats at bottom
    %   Parameters for TEXT pages (not float pages):
    \setcounter{topnumber}{2}
    \setcounter{bottomnumber}{2}
    \setcounter{totalnumber}{4}     % 2 may work better
    \setcounter{dbltopnumber}{2}    % for 2-column pages
    \renewcommand{\dbltopfraction}{0.9}	% fit big float above 2-col. text
    \renewcommand{\textfraction}{0.07}	% allow minimal text w. figs
    %   Parameters for FLOAT pages (not text pages):
    \renewcommand{\floatpagefraction}{0.7}	% require fuller float pages
    % N.B.: floatpagefraction MUST be less than topfraction !!
    \renewcommand{\dblfloatpagefraction}{0.7}	% require fuller float pages
    % remember to use [htp] or [htpb] for placement

    
%%% DWA proste polecenia s≥uøπce do ujednolicenia podawania ürÛde≥ przy rysunkach i~tabelkach    
    
    \newcommand\zrodlo[1]{\par\vspace{-3mm}{\small\textit{èrÛd≥o: }#1 }}
    \newcommand\zrodlotab[1]{{\par\vspace{2mm}\small\textit{èrÛd≥o: }#1 }}

\raggedbottom   %%% to znaczy, øe nie bÍdzie si≥owego wyrÛwnywania typowych
                %%     stron do jednakowej wysokoúci

\linespread{1.4}
\hyphenpenalty=5000
\tolerance=5000


\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%% STRONA TYTU£OWA %%%%%%%%%%%%%%%%

\thispagestyle{empty}  % tu wszak nie chcemy øadnej numeracji stron


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%tytu≥y definiuje jako makrodefinicje, gdyø zamierzam je%%%
%%%%%powtÛrzyÊ na stronie ze streszczeniami, to nic nie boli%%%
%%%%%a gwarantuje, øe bÍdπ one takie same, i~tak ma byÊ.%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\tytul{Aplikacja webowa wspomagajπca proces zapamiÍtywania}

\newcommand\tytulangielski{The web application supporting the learning process.}

\begin{center}
\Large
{POLITECHNIKA £”DZKA}

{Wydzia≥ Elektrotechniki, Elektroniki,\\
Informatyki i Automatyki}

\end{center}

\vfill %%%% \vfill to taki rozpychacz w pionie, pcha ile mu pozwolπ
\vfill
\vfill
\vfill
\vfill

\begin{center}
\large
{Praca dyplomowa inøynierska}
\end{center}

\begin{center}
\large
\textbf{\tytul}
\end{center}

\begin{center}
\large
\textbf{Emil JasiÒski}
\end{center}

\vfill

\begin{center}
\large
{Nr albumu: 164357}
\end{center}

\vfill
\vfill
\vfill
\vfill

\begin{center}
\large
\hfill {Opiekun pracy:} \\
\hfill \textbf{dr inø. Wojciech Tylman} \\
\end{center}

\vfill
\vfill
\vfill
\vfill
\vfill

\begin{center}
\large
{£Ûdü, 2014}
\end{center}

%%%%% koniec tytu≥Ûw


%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%
%%% teraz spis treúci
%%%%%%%%%%%%%%%%%%%%%
%%% pamiÍtaj! po jakiejkolwiek zmianie w tekúcie
%%% ktÛra wp≥ywa na zmianÍ spisu treúci, spis bÍdzie dobry co najmniej
%%% po dwÛch przebiegach latexa - to samo dotyczy odwo≥aÒ do wzorÛw i literatury
%%% ogÛlnie to przed wydrukiem warto przelatexowaÊ o jedne raz wiÍcej niø
%%% to siÍ wydaje konieczne, no chyba øe korzystamy z funkcji typu BUILD
%%% w zintegrowanym systemie wspomagajπcym TeX, BUILD powinien takie sprawy 
%%% wziπÊ pod uwagÍ

\tableofcontents

\chapter*{Streszczenie (Summary)}

\bigskip
\bigskip

\begin{center}
  \textbf{\tytul}
\end{center}

\large
Celem pracy by≥o opracowanie aplikacji wspomagajπcej proces nauki poprzez inteligentne planowanie powtÛrek. Zaimplementowano dobrze znany algorytm SuperMemo w nowoczesnej formie aplikacji webowej dzia≥ajπcej w trybie offline. Zastosowano podejúcie "Zaprojektuj raz, uruchamiaj wszÍdzie.". Pozwala to na uruchomienie aplikacji na platformach mobilnych (iOS, Android, Windows Phone) oraz platformie PC. Uøyto funkcjonalnoúci, ktÛre oferuje standard HTML5 oraz jÍzyk JavaScript. Aplikacja ma stanowiÊ konkurencjÍ dla programÛw SuperMemo UX oraz Anki. Zaletami w stosunku do nich jest bezp≥atne korzystanie oraz przyjaznoúÊ dla uøytkownika. Jednolity oraz dostosowujπcy siÍ do rodzaju urzπdzenia interfejs graficzny zosta≥ uzyskany poprzez wykorzystanie wyglπdu responsywnego.

\bigskip

\begin{center}
  \textbf{\textit{\tytulangielski}}
\end{center}


{\it
\large
The thesis aimed at developing the application supporting the learning process through intelligent planning repetitions. It was implemented well-known SuperMemo algorithm in a modern form of web application running in offline mode. It was applied "Write once, run anywhere." approach. This allows the application to run on mobile platforms (iOS, Android, Windows Phone) and on the PC platform. It was used functionality which are offering by HTML5 standard and JavaScript programming language. The application has to compete with programs like SuperMemo UX or Anki. The advantages with respect to them is free to use and user-friendliness. Clear and adapting to the type of hardware graphical interface has been obtained through the use of responsive web design.
}

\chapter*{WstÍp}


W obecnych czasach z kaødej strony do naszego mÛzgu dociera masa zbÍdnych informacji. CzÍúÊ bez naszej woli jak na przyk≥ad úwiecπcy billboard reklamowy, na ktÛry mimowolnie spoglπdamy jadπc samochodem, a na czeúÊ decydujemy siÍ sami gdy naszπ pierwszπ decyzjπ po przebudzeniu jest w≥πczenie telewizora lub komputera.


Coraz wiÍcej informacji jest nam rÛwnieø potrzebne w øyciu zawodowym. Wpis o znajomoúci jednego jÍzyka obcego w CV nie wyrÛønia nas juø na tle innych ubiegajπcych siÍ o pracÍ. NiektÛre profesje, jak na przyk≥ad zawÛd programisty wymagajπ nieustannego podnoszenia swoich kwalifikacji.


Taki nadmiar informacji, ktÛrego nie jesteúmy w stanie przetworzyÊ nazywa siÍ przeciπøeniem informacyjnym i moøe skutkowaÊ pogorszeniem siÍ naszego samopoczucia i uczuciem przyt≥oczenia. Rozwiπzaniem na ten rosnπcy problem spo≥eczny jest wygospodarowanie kaødego dnia czasu na spacer czy s≥uchanie muzyki, ktÛra nas odprÍøa. UlgÍ naszemu organizmowi moøe teø przynieúÊ skrÛcenie czasu poúwiÍconego na naukÍ. Okazuje siÍ, øe istnieje wiele sposobÛw na u≥atwienie zdobywania nowej wiedzy. Sπ to miÍdzy innymi:
\begin{itemize}

\item umiejÍtnoúÊ szybkiego czytania
\item mnemotechnika
\item metoda SuperMemo

\end{itemize}

\noindent
Ostatnia z wymienionych metod oraz aplikacja implementujπca algorytm o tej samej nazwie sπ przedmiotem tej pracy.


Projekt aplikacji przedstawionej w rozdziale "Projekt aplikacji wspomagajπcej zapamiÍtywanie" powsta≥ by w jak najwiÍkszym stopniu spe≥niÊ wymagania potencjalnych uøytkownikÛw. Za≥oøono, øe uøytkownik moøe chcieÊ korzystaÊ z aplikacji na swoim smartphonie, tablecie czy komputerze, bez dostÍpu do Internetu gdy nie jest to niezbÍdne. Przy dodatkowym za≥oøeniu, øe projekt nie wymaga duøej mocy obliczeniowej czy dostÍpu do natywnych elementÛw systemu operacyjnego, zdecydowano siÍ na wykorzystanie zbioru standardÛw oferowanych przez HTML w wersji piπtej.


\chapter{Cel i zakres pracy}


Celem pracy jest zaprojektowanie aplikacji, ktÛrej pierwsza czÍúÊ pozwoli uøytkownikowi utworzyÊ bazÍ wiedzy sk≥adajπcπ siÍ z pytaÒ i odpowiedzi. Druga czÍúÊ s≥uøy do prezentowania pytania. Uøytkownik ma na tym etapie zastanowiÊ siÍ nad odpowiedziπ. Gdy zna juø odpowiedü lub uznaje, øe przypomnienie sobie odpowiedzi trwa zbyt d≥ugo, przechodzi do czÍúci prezentacji odpowiedzi z formularzem, w ktÛrym sam ocenia swÛj poziom zapamiÍtania tego pytania. Jest to sposÛb przyjÍty w konkurencyjnych aplikacjach wykorzystujπcych algorytm SuperMemo.\\\\Zakres pracy przedstawia siÍ nastÍpujπco:
\begin{itemize}
\item Test przeglπdarek internetowych pod kπtem obs≥ugi HTML5
\item Opis uøytych technologii ze standardu HTML5
\item Przeglπd cech Visual Studio i ASP.NET, ktÛre u≥atwiajπ pisanie nowoczesnych aplikacji webowych
\item Historia algorytmu SuperMemo
\item Implementacja algorytmu SuperMemo w wersji drugiej
\item Zaprojektowanie aplikacji wykorzystujπcej algorytm
\item Testy aplikacji
\end{itemize}

% \section{Podstawy teoretyczne}


% \chapter[Optymalizacja Guildensterna w~praktycznych 
% rachunkach\ldots]{Optymalizacja 
% Guildensterna w~praktycznych rachunkach, ktÛry to tytu≥ jest na tyle d≥ugi, 
% øe nie bÍdzie siÍ ≥adnie mieúci≥ w~paginie, wiÍc w~paginie go skrÛcimy}
%% opcjonalna wersja w~nawiasie kwadratowym bÍdzie umieszczona
%% w~paginie  - sztuczka stosowana, gdy pe≥ny
%% tytu≥ jest nieco przyd≥ugi i~w~pagince zajmuje coú ponad jednπ
%% liniÍ

\chapter{Mobilne aplikacje webowe}

\noindent
Rozdzia≥ opracowano na podstawie [1], [2], [3].

\section{Historia specyfikacji HTML5}

HTML (ang. HyperText Markup Language) jest jÍzykiem znacznikÛw uøywanym do stworzenia struktury i wyglπdu strony WWW (ang. World Wide Web). Pierwsza specyfikacja zosta≥a upubliczniona w roku 1991 przez fizyka Tima Bernersa-Lee, ktÛry wczeúniej stworzy≥ prototyp hipertekstowego systemu informatycznego, pracujπc dla oúrodka CERN. Ideπ, ktÛra zdecydowa≥a o sukcesie takiego systemu prezentowania treúci w sieci Internet by≥y odnoúniki. W ten sposÛb na jednej stronie moøna by≥o zgrupowaÊ hiper≥πcza do wynikÛw badaÒ oúrodkÛw naukowych z wielu miejsc na úwiecie.


Ostaniπ wersjπ specyfikacji mia≥a byÊ specyfikacja HTML 4.01, ktÛra zosta≥a udostÍpniona przez organizacjÍ W3C (ang. World Wide Web Consortium) w roku 1999, jednak juø w 1998 W3C podjÍ≥o decyzje o zatrzymaniu jej rozwoju i rozpoczÍciu prac nad bazujπcπ na XML alternatywπ nazwanπ XHTML. Kontrowersje wzbudzi≥a specyfikacja XHTML 2.0, ktÛra nie by≥a kompatybilna z wczeúniejszymi wersjami.


W roku 2004, pracownicy firm Apple, Mozilla Foundation i Opera za≥oøyli grupÍ WHATWG (ang. Web Hypertext Application Technology Working Group). By≥o to spowodowane obawami przed kierunkiem rozwoju jaki przyjÍ≥o W3C - brak rozwoju HTML i brak odpowiedzi na potrzeby twÛrcÛw witryn i przeglπdarek internetowych. Grupa zaczÍ≥a pracowaÊ nad standardem HTML w wersji piπtej.


W roku 2006 W3C zgodzi≥o siÍ uøyÊ propozycji grupy WHATWG. Grupa W3C powo≥ana do rozwoju XHTML 2 zaprzesta≥a prac w 2009. W3C postanowi≥o przyspieszyÊ rozwÛj HTML 5 inwestujπc w pracÍ nad nim swoje zasoby.


W roku 2014 HTML 5 stanie siÍ rekomendacjπ W3C. Na rok 2016 planowane jest opublikowanie HTML 5.1.


\section{RÛønice w stosunku do HTML4}

HTML 5 jest stale rozwijajπcym siÍ standardem. Projektujπc stronÍ uøywajπc HTML 4 nie musimy martwiÊ siÍ o aktualizowanie strony, o ile oczywiúcie nie chcemy dodaÊ nowych treúci lub  funkcjonalnoúci. Strona zbudowana w oparciu o niego, ktÛra przesz≥a proces walidacji powinna wyúwietlaÊ siÍ identycznie na wszystkich przeglπdarkach niezaleønie od daty powstania. Jeúli przejdziemy na HTML 5 moøe dojúÊ do sytuacji, øe wykorzystany przez nas kilka miesiÍcy wczeúniej element lub atrybut zmieni≥ siÍ. Dotyczy to szczegÛlnie elementÛw wprowadzonych w HTML 5 (np. znaczniki audio, video). W zwiπzku z tym uproszczeniu mog≥a ulec deklaracja typu dokumentu. \\
Zamiast
\begin{lstlisting}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML
4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
\end{lstlisting}
uøywamy:
\begin{lstlisting}
<!DOCTYPE html>
\end{lstlisting}


\vspace{10 mm}


\noindent
Nowe znaczniki to miÍdzy innymi:
\begin{description}
\item{\textbf{canvas}} uøywany do rysowania grafiki przez skrypty pisane w jÍzyku JavaScript
\item{\textbf{audio}} definiuje plik düwiÍkowy jako treúÊ strony
\item{\textbf{video}} definiuje plik wideo jako treúÊ strony 
\item{\textbf{article}} definiuje artyku≥
\item{\textbf{nav}} definiuje sekcjÍ, ktÛra zawiera tylko linki
\item{\textbf{address}} definiuje sekcjÍ zawierajπcπ informacje kontaktowe
\item{\textbf{main}} definiuje g≥Ûwnπ, najbardziej znaczπcπ czÍúÊ strony
\item{\textbf{dialog}} definiuje okno dialogowe
\item{\textbf{section}} definiuje sekcje dokumentu
\item{\textbf{footer}} definiuje stopkÍ dla ca≥ego dokumentu lub sekcji
\item{\textbf{header}} definiuje nag≥Ûwek dla ca≥ego dokumentu lub sekcji
\item{\textbf{mark}} definiuje zaznaczony tekst
\item{\textbf{progress}} definiuje postÍp zadania
\item{\textbf{time}} definiuje datÍ/czas
\end{description}


\vspace{10 mm}


API (ang. Application Programming Interface) HTML 5 udostÍpnia programiúcie wiele nowoúci (rys. \ref{fig:html5Nowosci}). CzÍúÊ z nich ma za zadanie zastπpiÊ przestarza≥e rozwiπzania, inne wprowadzajπ zupe≥nie nowe moøliwoúci dla programisty.


\begin{figure}
  \centering
  \includegraphics[width=0.9\linewidth]{rys/BrowserHTMLCompatibility.jpg}
  \caption{Obs≥uga poszczegÛlnych technologii HTML5 na najpopularniejszych przeglπdarkach}
  \label{fig:html5Nowosci}
  \zrodlo{fmbip.com/litmus/}
\end{figure}


Jednym z mechanizmÛw, ktÛre HTML 5 stara siÍ zdeprecjonowaÊ sπ ciasteczka. Ciasteczka (ang. cookies) to porcja danych wysy≥ana z przeglπdarki internetowej i przechowywana jako ma≥y plik tekstowy na dysku twardym uøytkownika strony. Wykorzystywane sπ do przechowywania informacji o aktywnoúci uøytkownika (np. czy uøytkownik jest zalogowany).\\
Zalety:
\begin{itemize}
\item nie wymagajπ zasobÛw serwera,
\item sπ ≥atwe w implementacji.
\end{itemize}
Wady:
\begin{itemize}
\item sπ kaødorazowo wysy≥ane z øπdaniem i odpowiedziπ serwera,
\item mogπ byÊ wy≥πczone przez uøytkownika przeglπdarki,
\item problemy zwiπzane z bezpieczeÒstwem,
\item ma≥a pojemnoúÊ.
\end{itemize}


Nowa specyfikacja proponuje alternatywÍ w postaci WebStorage oraz IndexedDB. WebStorage dzieli siÍ na local storage i session storage. Dane zapisane w local storage nie wygasajπ. Dane w session storage wygasajπ po zamkniÍciu przeglπdarki lub okna oraz sπ oddzielne dla kaødej z instancji aplikacji.


IndexedDB jest bardziej zaawansowanym rozwiπzaniem. Jest to interfejs lokalnej bazy danych, w ktÛrej przechowywane mogπ byÊ zarÛwno wartoúci proste jak i skomplikowane, hierarchiczne obiekty. Rozwiπzanie zosta≥o zaproponowane przez firmÍ Oracle w roku 2009.


Zupe≥nπ nowoúciπ jest natomiast moøliwoúÊ pisania aplikacji dzia≥ajπcych w trybie offline. AppCache pozwala twÛrcy witryn zdefiniowaÊ, ktÛre pliki powinny zostaÊ zapisane na dysku uøytkownika, a nastÍpnie byÊ dostÍpne w trybie offline. Aplikacja napisana w ten sposÛb za≥aduje siÍ i bÍdzie dzia≥aÊ poprawnie nawet gdy uøytkownik jest poza zasiÍgiem sieci pod warunkiem, øe juø kiedyú odwiedzi≥ danπ witrynÍ. Moøna wiÍc przyrÛwnaÊ pierwsze w≥adowanie strony w przeglπdarce do instalacji natywnych aplikacji (np. w sklepie Google Play w systemie Android). By nastÍpnie zaktualizowaÊ zapisane na dysku pliki naleøy zmieniÊ manifest (plik tekstowy, ktÛry zawiera miÍdzy innymi spis plikÛw).\\
Zalety:
\begin{itemize}
\item uøytkownicy mogπ nawigowaÊ po stronie bez dostÍpu do internetu,
\item zysk na szybkoúci - zasoby naszej aplikacji ≥adowane sπ bezpoúrednio z dysku.
\end{itemize}


Powyøsze cechy powodujπ, øe warto przed rozpoczÍciem pisania aplikacji na urzπdzenia mobilne przemyúleÊ zalety i wady wybrania podejúcia - zaprojektuj raz, uruchamiaj wszÍdzie, oferowanego przez HTML5 i jÍzyk JavaScript. Zainteresowanie programistÛw tπ technologiπ moøemy odczytaÊ z rys. \ref{fig:html5VsNative}.



\begin{figure}
  \centering
  \includegraphics[width=0.6\linewidth]{rys/NativeVsWebDevelopment.png}
  \caption{PopularnoúÊ sposÛbÛw budowy aplikacji mobilnych}
  \label{fig:html5VsNative}
  \zrodlo{www.forrester.com}
\end{figure}


\section{RWD (Responsywny wyglπd)}

RWD (ang. Responsive web design) - responsywny wyglπd - jest to podejúcie w projektowaniu witryn internetowych, ktÛrego celem jest uzyskanie jak najlepszych doúwiadczeÒ dla odwiedzajπcego stronÍ. Strony napisane w oparciu o tÍ technikÍ sπ ≥atwe do nawigacji, czytania oraz obs≥ugujπ wiÍkszoúÊ urzπdzeÒ z dostÍpem do Internetu (od urzπdzeÒ mobilnych do komputerÛw PC).

Strona zaprojektowana w RWD przystosowuje szablon do úrodowiska, w ktÛrym jest oglπdana poprzez uøycie p≥ynnych, bazujπcych na proporcjach kontenerach, grafikach o zmiennych rozmiarach oraz funkcjonalnoúci kaskadowych arkuszy stylÛw (CSS3) - media queries .


Gdy projektujemy nowπ aplikacjÍ webowπ warto przyjπÊ podejúcie o nazwie "mobile first". Zak≥ada ono, øe pierwszym szablonem, ktÛry zostanie zaprojektowany jest ten na urzπdzenia mobilne. Na tym widoku powinny znaleüÊ siÍ najbardziej potrzebne elementy. Taki szablon powinien byÊ czytelny i wyraüny, by moøna go by≥o obs≥ugiwaÊ bez problemÛw palcami na ekranie urzπdzenia mobilnego o ma≥ej rozdzielczoúci ekranu. NastÍpnie powinniúmy siÍ zastanowiÊ jakie elementy chcielibyúmy pokazywaÊ dodatkowo w miarÍ zwiÍkszania rozdzielczoúci ekranu. Na wiÍkszych rozdzielczoúciach moøemy teø za≥oøyÊ, øe uøytkownik bÍdzie uøywa≥ myszy komputerowej, a wiÍc bÍdzie mÛg≥ obs≥ugiwaÊ nawet ma≥e elementy na stronie.


By wykorzystaÊ zalety tego podejúcia naleøy dodaÊ dodatkowy znacznik w sekcji HEAD naszej aplikacji:
\begin{lstlisting}
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
\end{lstlisting}
Jest to wskazÛwka dla przeglπdarki internetowej, øe nie powinna ona skalowaÊ danej strony.


W zaleønoúci od rozdzielcznoúci ekranu projektant witryny internetowej moøe zdecydowaÊ o wczytywaniu innych styli. Gdy chcemy wczytaÊ style dla rozdzielcznoúci powyøej 900 pikseli szerokoúci, ale mniejszej niø 1024 powinniúmy uøyÊ:

\begin{lstlisting}
@media screen and (min-width: 900px) and (max-width: 1024px)
{
	/* style tylko dla tej rozdzielczosci */
}
\end{lstlisting}

\section{Visual Studio i ASP.NET jako úrodowisko pracy}


Wybierajπc edytor lub zintegrowane úrodowisko programistyczne do budowy aplikacji webowej warto sprawdziÊ czy posiada on zestaw pluginÛw Zen Coding. Znaczπco przyspiesza to pisanie kodu HTML, a dziÍki temu, øe silnik pluginÛw jest niezaleøny od edytora powinniúmy znaleüÊ dodatek do kaødego popularnego IDE (ang. Integrated Development Environment). Uøycie tego dodatku wiπøe siÍ z wpisaniem w edytor odpowiedniej komendy i naciúniÍciu klawisza TAB.\\\\Przyk≥ad dzia≥ania:
\begin{lstlisting}
html:5>div#page>div.logo+nav>ul#navigation>li*5>a
\end{lstlisting}
Rezultat:
\begin{lstlisting}
<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
</head>
<body>
    <div id="page">
        <div class="logo"></div>
        <nav>
            <ul id="navigation">
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
            </ul>
        </nav>
    </div>
</body>
</html>
\end{lstlisting}


Odpowiedni dodatek do Visual Studio moøna pobraÊ przez wbudowane narzÍdzie do pobierania dodatkÛw jak i bibliotek programistycznych - NuGet. Natomiast funkcjonalnoúciπ, ktÛrej nie moøemy odtworzyÊ w innych IDE jest IntelliSense. DziÍki niej podczas wpisywania kodu w jÍzyku C\# czy JavaScript widzimy podpowiedzi odnoúnie nazwy funkcji czy opis parametrÛw jakie dana metoda przyjmuje. W przypadku tego drugiego jÍzyka podpowiedzi w innych IDE sπ rzadkoúciπ.


W nowoczesnych aplikacjach na znaczeniu zyska≥a warstwa kliencka, a ca≥y wyglπd powinien byÊ zdefiniowany poprzez kaskadowe arkusze stylÛw. Zasadπ, ktÛra pozwala na oddzielenie kodu html, css i js jest tworzenie dla nich osobnych plikÛw. Powinny byÊ u≥oøone w logiczny sposÛb np. kaøda klasa napisana w jÍzyku JavaScript w osobnym pliku. Wiπøe siÍ z tym zwiÍkszenie liczby øπdaÒ do serwera. Istnieje cecha ASP.NET dziÍki ktÛrej moøemy zachowaÊ logicznπ strukturÍ naszych plikÛw warstwy klienckiej i jednoczeúnie zwiÍkszyÊ wydajnoúÊ naszej witryny. Bundles, bo tak nazywa siÍ ta funkcjonalnoúÊ, pozwala nam utworzyÊ grupÍ plikÛw, ktÛra zostanie po≥πczona w jeden plik o podanej przez nas nazwie. Dodatkowo plik wynikowy zostanie zminimalizowany, co moøe znaczπco obniøyÊ jego rozmiar. MinimalizacjÍ plikÛw moøna wy≥πczyÊ w trybie DEBUG.


Przeglπdarki internetowe posiadajπ pamiÍÊ podrÍcznπ tzw. cache, ktÛry przechowuje pliki z wczeúniej odwiedzonej strony. W ten sposÛb ≥πcze internetowe klienta i zasoby serwerowe sπ odciπøone, a strona ≥aduje siÍ szybciej. Jest jednak istotna wada tego rozwiπzania - klient moøe posiadaÊ nieaktualny plik. Bundles oferujπ rozwiπzanie dziÍki do≥πczaniu do adresu z plikiem argumentu tzw. Content Hash. Jest on generowany na podstawie treúci pliku. Gdy treúÊ ulegnie zmianie, zmieni siÍ teø hash. W ten sposÛb klient pobierze zawsze najnowszy plik. Jest to waøne gdy w naszych plikach znajduje siÍ rozwiπzanie krytycznego b≥Ídu naszej aplikacji.


\begin{figure}
  \centering
  \includegraphics[width=0.9\linewidth]{rys/VisualStudioToHtml.png}
  \caption{Widok plikÛw w IDE oraz kod HTML po≥πczonych plikÛw}
  \label{fig:visualStudioToHtml}
  \zrodlo{Opracowanie w≥asne}
\end{figure}


Powyøsze cechy sprawiajπ, øe Visual Studio i ASP.NET jest dobrym wyborem jeúli szukamy úrodowiska do pisania nowoczesnych aplikacji webowych.


\section{HTML5 jako platforma mobilna}

W 2007 firma Apple zaprezentowa≥a smartphone o nazwie iPhone. Wprowadzi≥a w ten sposÛb nowπ jakoúÊ do úwiata urzπdzeÒ mobilnych i spowodowa≥a, øe dotychczasowe smartphony wydawa≥y siÍ przestarza≥e. Konkurencja prÛbujπc sprostaÊ nowo zdefiniowanym wymaganiom uøytkownikÛw zaczÍ≥a opracowywaÊ nowe systemy operacyjne i urzπdzenia. Wp≥yw firmy Steava Jobsa na system Android moøemy zaobserwowaÊ na rys. \ref{fig:androidBeforeAfter}. Podobny interfejs graficzny i wraøenia z uøytkowania moøemy rÛwnieø zobaczyÊ w systemie mobilnym Windows czy FirefoxOS.

W 2008 Steve Jobs pragnπ≥ rozpoczπÊ jeszcze jednπ rewolucjÍ. Og≥osi≥ wtedy, øe iPhone bÍdzie posiada≥ wiele aplikacji, wszystkie dzia≥ajπce po stronie przeglπdarki. WkrÛtce jednak zrewidowa≥ swÛj pomys≥ i og≥osi≥ otwarcie internetowego sklepu z natywnymi aplikacjami.

Nie oznacza to, øe nie powstajπ aplikacje webowe na urzπdzenia mobilne, lecz dominujπcym sposobem dalej pozostajπ aplikacje natywne. Potencja≥ rozwiπzaÒ webowych pokazuje fakt, iø 2 miliardy ludzi korzysta ze stron WWW, podczas gdy z systemu iOS korzysta 50 milionÛw uøytkownikÛw.

Nie moøna wiÍc udzieliÊ jednoznacznej odpowiedzi, ktÛre podejúcie do pisania aplikacji mobilnych naleøy wybraÊ. Warto podjπÊ dycyzjÍ w zaleønoúci od typu projektu.
\\\\
\noindent
Zalety HTML5 jako platformy mobilnej:
\begin{itemize}
\item Raz napisana aplikacja moøe byÊ uruchomiona na wielu platformach.
\item Uøytkownik zawsze uøywa najnowszej wersji aplikacji.
\item Przyjazna dla programistÛw webowych. By napisaÊ aplikacje natywne na g≥Ûwne platformy mobilne potrzebna jest znajomoúÊ jÍzykÛw: Objective-C, Java oraz C\#.
\end{itemize}


\noindent
\\
Wady:
\begin{itemize}
\item Ograniczony dostÍp do zasobÛw sprzÍtowych (np. odczyt stanu baterii).
\item Mniejsza wydajnoúÊ graficzna.
\item Brak wbudowanego systemu p≥atnoúci za aplikacjÍ.
\end{itemize}


\begin{figure}
  \centering
  \includegraphics[width=0.9\linewidth]{rys/AndroidBeforeAfter.jpg}
  \caption{Po lewej prototyp z systemem Android z 2007 roku. Po prawej docelowe urzπdzenie wyprodukowane przez HTC w 2008.}
  \label{fig:androidBeforeAfter}
  \zrodlo{www.idownloadblog.com}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=0.9\linewidth]{rys/SmartphoneMarket.png}
  \caption{Udzia≥ systemÛw operacyjnych na rynku urzπdzeÒ mobilnych.}
  \label{fig:smartphoneMarket.png}
  \zrodlo{www.collaborative.com}
\end{figure}


\chapter{Algorytm SuperMemo}

\noindent
Rozdzia≥ opracowano na podstawie [4], [5], [6], [7], [8].

\section{Krzywa zapominania}

Inaczej zwana krzywπ Ebbinghausa, od nazwiska Hermanna Ebbinghausa. Ten niemiecki psycholog zaproponowa≥ w swojej pracy "O pamiÍci" zaleønoúÊ iloúci pamiÍtanego materia≥u od czasu. Typowy wykres krzywej zapominania pokazuje, øe ludzie zapominajπ po≥owÍ nowo nabytej wiedzy w ciπgu kilku dni lub tygodni jeúli materia≥ nie by≥ regularnie powtarzany. W 1885 Ebbinghaus wysnu≥ teoriÍ o wyk≥adniczej naturze zapominania i opisa≥ jπ wzorem:


$$
R = e^{\frac{-t}{s}},
$$
gdzie:\\
R  - zachowanie wiedzy\\
S - wzglÍdna si≥a pamiÍci\\
t - czas

Ebbinghaus uczy≥ siÍ sylab pozbawionych znaczenia poprzez powtarzanie po rÛønych okresach czasu.  Ustali≥ w ten sposÛb, øe spadek zapamiÍtanych informacji staje siÍ coraz mniejszy (rys. \ref{fig:forgettingCurves}). Krzywa zapominania sta≥a siÍ fundamentem do dalszych badaÒ i w rezultacie opracowania algorytmu SuperMemo.


\begin{figure}
  \centering
  \includegraphics[width=0.6\linewidth]{rys/ForgettingCurve.png}
  \caption{Wykres krzywych zapominania dla kolejnych powtÛrzeÒ}
  \label{fig:forgettingCurves}
  \zrodlo{Wikipedia}
\end{figure}

\section{Opis}


Dr Piotr Woüniak prowadzi badania nas teoriπ metod nauczania, ktÛre zaowocowa≥y powstaniem algorytmu SuperMemo i programu o tej samej nazwie. Jest on teø osobπ odpowiedzialnπ za komercyjne wykorzystanie tej metody. Pierwsza wersja programu powsta≥a w 1987 roku. Napisana zosta≥a w úrodowisku Turbo Pascal 3.0, IBM PC i powsta≥a by zaprezentowaÊ metodÍ na dwa podstawowe sposoby:
\begin{itemize}
\item{zastosowanie procedur optymalizacji na najmniejszych moøliwych przedmiotach},
\item{zrÛønicowanie elementÛw na postawie poziomu trudnoúci}.
\end{itemize}


Zaproponowano w niej nastÍpujπcy wzÛr na obliczenie kolejnych przerw miÍdzy powtÛrzeniami:

\[
\begin{array}{lcr} I(1) = & 1 \\ I(2) = & 6 \\I(n) = & I(n-1) * EF & \mbox{, dla }n>2\end{array}
\]
gdzie:\\
I(n) - przerwa bez powtÛrzenia po n-tym powtÛrzeniu (wyraøona w dniach)\\
EF - ang. easiness factor - odzwierciedla poziom trudnoúci w zapamiÍtaniu i przypomnieniu danego faktu


WartoúÊ EF moøe wynosiÊ od 1,1 dla najtrudniejszego faktu do 3,5 dla najprostszego. W momencie wprowadzenia faktu do bazy SuperMemo wartoúÊ EF jest rÛwna 2,5. Jeøeli w procesie powtarzania materia≥u istniejπ problemy z przypomnieniem sobie odpowiedzi na dane pytanie wartoúÊ ta maleje.

WkrÛtce po utworzeniu pierwszej wersji SuperMemo, autor zauwaøy≥, øe wartoúÊ EF nie powinna spadaÊ ponizej 1,3, gdyø powodowa≥o to, øe pytania wyúwietla≥y siÍ zbyt czÍsto.


By obliczyÊ nowπ wartoúÊ EF, uczeÒ musi po kaødej odpowiedzi na pytanie oceniÊ swÛj poziom przyswojenia danego faktu. Program SuperMemo uøywa skali od 0 do 5. OgÛlna forma uøytego wzoru wyglπda nastÍpujπco:

$$
EF' = f(EF, q)
$$
gdzie:\\
EF' - nowa wartoúÊ EF\\
EF - stara wartoúÊ EF\\
q - jakoúÊ odpowiedzi\\
f - funkcja uøyta do obliczenia EF'\\\\
Funkcja obliczania EF':
$$
EF' = EF+(0,1-(5-q)*(0,08+(5-q)*0,02))
$$
Warto zauwaøyÊ, øe dla q rÛwnego 4 wartoúÊ EF nie ulega zmianie.

\section{Algorytm SuperMemo w wersji drugiej}

\noindent
Algorytm SuperMemo w wersji drugiej programu przedstawia siÍ nastÍpujπco:


\begin{enumerate}
\item Podziel wiedzÍ, ktÛrπ chcesz przyswoiÊ na jak najmniejsze fakty (pytanie i odpowiedü).
\item Przypisz dla wszystkich faktÛw wartoúÊ EF rÛwnπ 2,5.
\item Powtarzaj fakty robiπc nastÍpujπce przerwy:
\[
\begin{array}{lcr} I(1) = & 1 \\ I(2) = & 6 \\I(n) = & I(n-1) * EF & \mbox{, dla }n>2\end{array}
\]
\item Po kaødym powtÛrzeniu oceÒ jakoúÊ odpowiedzi w skali od 0 do 5, gdzie\\
5 - doskona≥a odpowiedü\\
4 - poprawna odpowiedü po zastanowieniu\\
3 - poprawna odpowiedü po d≥ugim zastanowieniu\\
2 - niepoprawna odpowiedü, gdy poprawna wydaje siÍ ≥atwa do przypomnienia\\
1 - niepoprawna odpowiedü, poprawna zosta≥a przypomniana\\
0 - brak odpowiedzi\\
\item Po kaødej odpowiedzi zmodyfikuj wartoúÊ EF przypisanπ do danego faktu wed≥ug wzoru:
$$
EF' = EF+(0,1-(5-q)*(0,08+(5-q)*0,02))
$$
Jeúli ocena odpowiedzi jest mniejsza niø 1,3 to ustaw nowπ wartoúÊ EF na 1,3.
\item Jeúli ocena odpowiedzi jest niøsza niø 3 to zacznij powtÛrkÍ dla faktu bez zmiany wartoúci EF.
\item Po kaødym powtÛrzeniu w danym dniu powtarzaj elementy ocenione poniøej 4. Kontynuuj dopÛki wszystkie fakty bÍdπ ocenione przynajmniej na 4.
\end{enumerate}


\noindent
Algorytm uøyty w aplikacji, ktÛra jest przedmiotem tej pracy, zawiera siÍ w klasie Card i wyglπda nastÍpujπco:
\begin{lstlisting}
var Card = function (deckId, front, back) {
    var self = this;
    self.data = {
        deckId: deckId,
        front: front,
        back: back,
        
        repetitionCount: 0,
        easinessFactor: 2.5,
        nextRepetitionDate: Date.now(),
        daysToNextRepetition: 0
    };
};

Card.makeReview = function (data, grade) {
    if (grade < 3) {
        data.repetitionCount = 0;
        data.nextRepetitionDate = Date.now();
        data.daysToNextRepetition = 0;
    }
    else {
        ++data.repetitionCount;

        if (data.repetitionCount == 1)
            data.daysToNextRepetition = 1;
        else if (data.repetitionCount == 2)
            data.daysToNextRepetition = 6;
        else
            data.daysToNextRepetition
		= parseInt(data.daysToNextRepetition * data.easinessFactor);

        daysToNextRepetition = data.daysToNextRepetition;
        data.nextRepetitionDate = moment(data.nextRepetitionDate)
			     .add('days', data.daysToNextRepetition).valueOf();
    }

    data.easinessFactor = data.easinessFactor +
			     (0.1 - (5 - grade) * (0.08 + (5 - grade) * 0.02));
 
    if (data.easinessFactor < 1.3)
        data.easinessFactor = 1.3;
};
\end{lstlisting}

\section{Programy wykorzystujπce metodÍ SuperMemo}

Najpopularniejsze programy wykorzystujπce opisany algorytm to program SuperMemo UX oraz Anki.

Autorem SuperMemo UX jest dr Piotr Woüniak, ktÛry jest rÛwnieø autorem algorytmu i metody SuperMemo. Wersja dostÍpna dla uøytkownikÛw pojawi≥a siÍ w 1991 roku. Model biznesowy programu opiera siÍ na p≥atnych kursach jÍzykowych. D≥ugi okres rozwoju aplikacji zaowocowa≥ w zaawansowane funkcje, takie jak:
\begin{itemize}
\item aktywacja i dezaktywacja informacji do nauki,
\item modu≥ pozwalajπcy na doskonalenie wymowy s≥Ûw,
\item obs≥uga jednej instancji programu przez wielu uøytkownikÛw,
\item funkcja "incremental video" - nauka na podstawie filmÛw z serwisu YouTube.
\end{itemize}


Anki reprezentuje odmienne podejúcie. Program ten jest w pe≥ni darmowy i oferuje bazy danych utworzone przez uøytkownikÛw. Autor pracuje nad rozwojem wersji na PC, webowej oraz przenaczonej na urzπdzenia z systemem operacyjnym iOS (iPhone / iPad / iPod Touch). Kod ürÛd≥owy aplikacji jest dostÍpny na otwartej licencji. DziÍki temu powsta≥a niezaleøna wersja na urzπdzenia z systemem Android.


\chapter{Projekt aplikacji wspomagajπcej zapamiÍtywanie}

\section{Za≥oøenia}

Aplikacja ma stanowiÊ alternatywÍ dla innych programÛw wspomagajπcych proces nauki poprzez inteligentne planowanie powtÛrek. Zaletami w stosunku do programu autora algorytmu SuperMemo jest prostota obs≥ugi i darmowe korzystanie. Cechami pozwalajπcymi konkurowaÊ z programem Anki sπ intuicyjna obs≥uga oraz fakt, øe moøna jπ odpaliÊ na kaødej platformie mobilnej jak i komputerze PC.


MultiplatformowoúÊ jest zapewniona poprzez napisanie aplikacji przeglπdarkowej. W ten sposÛb aplikacja moøe byÊ odpalona na platformach mobilnych, takich jak Windows Phone, Android, iPhone, ma≥o popularnych platformach takich jak Sailfish, Tizen, FirefoxOS, ale teø na systemach, ktÛre powstanπ w przysz≥oúci o ile bÍdπ posiada≥y nowoczesnπ przeglπdarkÍ internetowπ, co jest standardowym wyposaøeniem kaødej platformy.

Interfejs graficzny napisany jest tak, by dopasowaÊ siÍ do rozdzielczoúci kaødego urzπdzenia dostÍpnego na rynku.

\section{Wymagania}

Do korzystania z aplikacji wymagana jest przeglπdarka internetowa obs≥ugujπca nastÍpujπce funkcjonalnoúci HTML 5:
\begin{itemize}
\item Local Storage
\item Canvas
\item IndexedDB
\end{itemize}
Sπ to najpopularniejsze przeglπdarki na komputery PC: Google Chrome, Internet Explorer, Mozilla Firefox i Opera w wersjach najúwieøszych oraz ich odpowiedniki na urzπdzenia mobilne.

Aby synchronizowaÊ dane z serwerem konieczne jest posiadanie konta.

\section{Instrukcja dla uøytkownika}

Przy pierwszym uruchomieniu aplikacji uøytkownikowi wyúwietla siÍ okno z instrukcjπ dotyczπcπ aplikacji (rys. \ref{fig:appHelp}). Informuje ono uøytkownika, øe ma do czynienia z aplikacjπ webowπ dzia≥ajπcπ w trybie offline, ktÛra ma za zadanie pomÛc w nauce nowego jÍzyka, ale rÛwnieø w przyswojeniu innej wiedzy uøywajπc metody inteligentnego planowania nastÍpnych powtÛrek materia≥u. WiÍcej informacji o tej metodzie uøytkownik moøe zdobyÊ klikajπc na link do artyku≥u na wikipedii. Pomoc zawiera takøe tabelÍ z wyjaúnieniem pojÍÊ i symboli uøywanych w aplikacji. Dowiaduje siÍ z niej, øe deck (ang. talia) powinien traktowaÊ jako grupÍ pytaÒ i odpowiedzi, ktÛrπ pragnie przyswoiÊ. Mogπ byÊ to na przyk≥ad  hiszpaÒskie s≥owa z ich t≥umaczeniem w jÍzyku angielskim. Card (ang. karta) stanowi pojedyÒcze pytanie i odpowiedü(np. przÛd karty - dog, ty≥ karty - perro). Przedstawiony jest rÛwnieø symbol, ktÛry reprezentuje statusy w jakich moøe pracowaÊ aplikacja:
\begin{itemize}
\item zielony - jesteúmy pod≥πczeni do internetu, dane sπ zsynchronizowane z serwerem 
\item czerwony - nie mamy po≥πczenia z internetem, dane sπ zsynchronizowane z serwerem
\item zielony, pulsujπcy - trwa synchronizacjπ danych z serwerem
\item czerwony, pulsujπcy - po pod≥πczeniu do intenetu rozpocznie siÍ synchronizacja danych
\end{itemize}

\noindent
Identyczne okno pojawia siÍ po klikniÍniu na wyrazy "deck" i "card" w reszcie aplikacji.

\begin{figure}
  \centering
  \includegraphics[width=0.8\linewidth]{rys/AppHelp.png}
  \caption{Instrukcja obs≥ugi aplikacji}
  \label{fig:appHelp}
  \zrodlo{Opracowanie w≥asne}
\end{figure}


Po zamkniÍciu okna uøytkownik widzi formularz do za≥oøenia nowego konta na stronie lub w przypadku gdy juø posiada konto moøe siÍ zalogowaÊ poprzez formularz dostÍpny, w przypadku  urzπdzenia mobilnego, po klikniÍciu w przycisk umieszczony w prawym gÛrnym rogu ekranu. W przypadku urzπdzeÒ z wiÍkszπ rozdzielczoúciπ ekranu pola formularza potrzebne do zalogowania sπ widoczne w tym miejscu (rys. \ref{fig:appRegistration}).

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/AppRegistration2.png}
  \caption{Zrzut ekranu z formularzem zak≥adania nowego konta. W wersji komputerowej po lewej stronie i mobilnej po prawej.}
  \label{fig:appRegistration}
  \zrodlo{Opracowanie w≥asne}
\end{figure}


Gdy wype≥nimy pola formularza rejestracji i nie otrzymamy komunikatu o b≥Ídzie informujπcym o zajÍtej nazwie uøytkownika lub niezgodnoúci wprowadzonych hase≥, zostaniemy automatycznie zalogowani na nowo utworzone konto. Domyúlnym ekranem startowym jest lista grup faktÛw do nauki na obecny dzieÒ (rys. \ref{fig:screenStudyList}). W przypadku gdy nie ma nic do powtarzania na dany dzieÒ uøytkownikowi wyúwietla siÍ komunikat z odpowiedniπ informacjπ oraz wskazÛwka, by kliknπ≥ odnoúnik "Decks" aby dodaÊ nowe grupy do nauki i karty. Po klikniÍciu na nazwÍ danej grupy przechodzimy do trybu powtarzania zawartych w niej faktÛw. Gdy algorytm dojdzie do miejsca, w ktÛrym nie ma juø faktÛw do nauki przechodzimy z powrotem do listy.

Jeúli uøytkownik chce dodaÊ nowe fakty do swojej bazy wiedzy powinien przejúÊ do pozycji "Decks" w menu. Tam wyúwietli siÍ lista z juø istniejπcymi grupami lub informacja jak dodaÊ nowe. Po klikniÍciu w nazwÍ grupy dodajemy do niej nowe karty, aby to zrobiÊ naleøy uzupe≥niÊ pola front - przednia czÍúÊ karty i back - tylnia czÍúÊ. Front to pytanie, back - odpowiedü na nie. Jeúli chcemy jednoczeúnie dodaÊ dwie karty, jednπ  z pytaniem w polu front oraz odpowiedziπ w back i drugπ z pytaniem w polu back oraz odpowiedziπ w polu front, naleøy zaznaczyÊ opcjÍ o nazwie "reverse".

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ScreenStudyList.png}
  \caption{Zrzut ekranu z widokiem listy grup faktÛw do nauki. Wersja mobilna.}
  \label{fig:screenStudyList}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ScreenStudyListDesktop.png}
  \caption{Zrzut ekranu z widokiem listy grup faktÛw do nauki. Wersja desktopowa.}
  \label{fig:screenStudyListDesktop}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

Ostatnim ekranem, na ktÛrym uøytkownik spÍdzi najwiÍcej czasu i ktÛry jest g≥Ûwnπ funkcjonalnoúciπ aplikacji jest formularz powtarzania wiedzy. Schemat powtarzania wyglπda nastÍpujπco:
\begin{itemize}
\item Wyúwietlone zostaje pytanie.
\item Uøytkownik zastanawia siÍ nad odpowiedziπ.
\item Gdy przypomina sobie odpowiedü lub dochodzi do wniosku, øe nie jest w stanie sobie przypomnieÊ wybiera przycisk z napisem "Show answer" - "Pokaø odpowiedü". NastÍpnie ma za zadanie oceniÊ jakoúÊ udzielonej odpowiedzi lub jej brak. Robi to przez klikniÍcie odpowiedniego przycisku (rys. \ref{fig:screenReview}).
\end{itemize}

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ScreenReview.png}
  \caption{Zrzut ekranu formularza do powtarzania bazy wiedzy. Wersja mobilna.}
  \label{fig:screenReview}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ScreenReviewDesktop1.png}
  \caption{Zrzut ekranu z widokiem pytania. Wersja desktopowa.}
  \label{fig:screenReviewDesktop1}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ScreenReviewDesktop2.png}
  \caption{Zrzut ekranu z widokiem odpowiedzi. Wersja desktopowa.}
  \label{fig:screenReview}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\section{Zapis i synchronizacja danych}

Wszelkie operacje dodania nowych danych sπ realizowane za pomocπ metod zawartych w klasie "Repository". S≥uøy ona do komunikacji z bazπ danych po stronie klienta-przeglπdarki - IndexedDB oraz klasy "Synchronizer".

\begin{lstlisting}
var openRequest = indexedDB.open("mmdb", 2);

openRequest.onupgradeneeded = function (e) {
    console.log("Upgrading...");

    var thisDB = e.target.result;

    if (!thisDB.objectStoreNames.contains("decks")) {
        thisDB.createObjectStore("decks", {keyPath:"id",autoIncrement:false});
    }

    if (!thisDB.objectStoreNames.contains("cards")) {
        thisDB.createObjectStore("cards", {keyPath:"id",autoIncrement:false });
    }
}

openRequest.onsuccess = function (e) {
    db = e.target.result;

    db.onerror = function (event) {
        alert("Database error: " + event.currentTarget.target.errorCode);
    }

    appStart();
}
\end{lstlisting}


Przed uøyciem bazy IndexedDB naleøy najpierw otworzyÊ bazÍ. W lini 1 wywo≥ujemy asynchronicznie metodÍ open z argumentem "mmdb" - nazwa bazy danych oraz 2 - wersja. Argumentem jest obiekt typu IDBRequest. W przypadku gdy na dysku uøytkownika nie ma jeszcze bazy lub jest w niøszej wersji wywo≥ana zostanie metoda "onupgradeneeded". Po jej wykonaniu utworzone zostanπ dwie tabele w bazie o nazwie "cards" oraz "decks". W obu przypadkach definiujemy indeks id, w ktÛrym wy≥πczamy automatyczne podnoszenie o jeden wartoúci, gdyø wartoúci id nadajemy na poziome bazy danych po stronie serwera. W przypadku gdy powiedzie siÍ zaktualizowanie lub utworzenie bazy oraz otworzenie bazy wywo≥ana zostaje funkcja przypisana do pola onsuccess obiektu IDBRequest. Ustawiamy w niej obiekt potrzebny do dalszych operacji na bazie IndexedDB podczas trwania korzystania z aplikacji. Ustawiamy rÛwnieø domyúlnπ akcjÍ, ktÛra wykona siÍ przy wystπpieniu b≥Ídu zapisu lub pobrania danych. W takim przypadku wyúwietlamy kod b≥Ídu na konsoli programisty JavaScript.


\begin{lstlisting}
self.getDecks = function (callback) {
    var trans = db.transaction("decks");
    var store = trans.objectStore("decks");
    var items = [];

    trans.oncomplete = function (evt) {
        callback(items);
    };

    var cursorRequest = store.openCursor();

    cursorRequest.onsuccess = function (evt) {
        var cursor = evt.target.result;
        if (cursor) {
            items.push(cursor.value);
            cursor.continue();
        }
    };
}
\end{lstlisting}

"getDecks" jest jednπ z metod s≥uøπcπ jedynie do pobrania danych. Jako argument przyjmuje funkcjÍ, ktÛra wykona siÍ po poprawnym pobraniu danych i przyjmuje jako argument pobrane dane.  W ten sposÛb moøemy wykonaÊ kolejno po sobie akcje: akcja uøytkownika, pobranie danych, przetworzenie danych (np. wyúwietlenie na liúcie) mimo asynchronicznego wykonania kodu. Aby wykonaÊ samπ operacjÍ pobierania najpierw potrzebny jest obiekt IDBTransaction z parametrem nazwy transakcji. Domyúlnie transakcja ma prawa czytania, ktÛre w tym przypadku sπ wystarczajπce, poniewaø nie modyfikujemy danych. NastÍpnie pobieramy obiekt dziÍki ktÛremu mamy dostÍp do kursora znanego z tradycyjnych systemÛw zarzπdzania relacyjnymi bazami danych jak np. Microsoft SQL Server. Otwierajπc kursor implikujemy kolejne wykonania metody "onsuccess". Moøemy z niego odczytaÊ obiekt, wczeúniej zapisany do naszej bazy. Dodajemy go do tablicy "items". Gdy wszystkie obiekty zostanπ w niej zapisane, zostaje wywo≥ana funkcja "oncomplete". W niej powracamy do fragmentu kodu, do ktÛrego dzia≥ania niezbÍdne sπ pobrane dane.


\begin{lstlisting}
self.addDeck = function (deck) {
    var trans = db.transaction("decks", "readwrite");
    var store = trans.objectStore("decks");

    deck.id = self.getNextDeckId();
    deck.lastUpdateDate = Date.now();

    self.setDeckLastUpdateDate(deck.lastUpdateDate);
    var request = store.add(deck);

    request.onsuccess = function (e) {
        synchronizer.decksToSync.push(deck);
    };
};
\end{lstlisting}

Drugim typem metod wystÍpujπcym w obiekcie "repository" sπ funkcje modyfikujπce lub dodajπce nowe obiekty do bazy. W "addDeck", tak jak w przypadku "getDecks" potrzebujemy obiektu transakcji. Dodatkowo musimy zaznaczyÊ, øe chcemy modyfikowaÊ dane poprzez argument "readwrite".  W argumencie funkcji przekazujemy obiekt, ktÛry chcemy zapisaÊ. Po nadaniu id oraz daty ostatniej modyfikacji rozpoczynamy zapis. Jeúli siÍ powiedzie wykona siÍ metoda "onsuccess". W niej wywo≥ujemy metodÍ obiektu "synchronizer", ktÛry jest odpowiedzialny za synchronizacjÍ danych z serwerem.

Koniecznym elementem niezbÍdnym dla aplikacji webowej dzia≥ajπcej w trybie offline jest mechanizm zapewniajπcy synchronizacjÍ danych z bazπ danych po stronie serwera. S≥uøy do tego klasa "Synchronizer". Jej metoda "setNetworkStatus" jest wywo≥ywana co 1500 milisekund i sprawdza status po≥πczenia z Internetem poprzez odwo≥anie siÍ do w≥aúciwoúci onLine obiektu navigator. W przypadku gdy jest ona ustawiona na wartoúÊ "false" moøemy z pewnoúciπ za≥oøyÊ brak dostÍpu do Internetu. W przypadku wartoúci "true" nie mamy tej gwarancji od wszystkich twÛrcÛw przeglπdarek internetowych. W zwiπzku z tym naleøy upewniÊ siÍ poprzez testowe odwo≥anie do dowolnego serwera. W przypadku powodzenia komunikujemy uøytkownikowi, iø znajduje siÍ w trybie online. W przypadku b≥Ídu lub przekroczenia maksymalnego czasu po≥πczenia sygnalizujemy tryb offline.


Ustawienie wartoúci odpowiadajπcej stanowi po≥πczenia internetowego klienta nie s≥uøy jedynie do celÛw informacyjnych. WartoúÊ ta jest niezbÍdna przy sprawdzeniu czy moøna rozpoczπÊ proces synchronizacji danych wczeúniej umieszczonych w bazie po stronie klienta. Jeúli klient ma dostÍp do internetu wywo≥ywane sπ funkcje, jak np. "synchronizeDecks".

\begin{lstlisting}
self.synchronizeDecks = function (successCallback) {
    var decks = self.decksToSync.get();

    var url = "/Synchronize/SynchronizeDecks";
    $.post(url, { json: htmlEncode(JSON.stringify(decks)) },
			function (data, textStatus) {
        if (data.success) {
            successCallback();
            self.decksToSync.clean();
        }
        else
            self.setNetworkStatus();
    });
};

function LocalStorageArray(id) {
    var self = this;

    self.clean = function () {
        localStorage[id] = JSON.stringify([]);
    };

    self.push = function (o) {
        var array = JSON.parse(localStorage[id]);
        array.push(o);
        localStorage[id] = JSON.stringify(array);
    };

    self.get = function () {
        var array = JSON.parse(localStorage[id]);
        return array;
    };

    if(!localStorage[id])
        self.clean();
};
\end{lstlisting}

W linii 2 nastÍpuje pobranie danych wczeúniej zapisanych do bazy IndexedDB, ale nie zsynchronizowanych z bazπ po stronie serwerowej. Tego typu dane postanowiono zapisaÊ za pomocπ klasy opakowujπcej (ang. wrapper) funkcjonalnoúÊ LocalStorage o nazwie LocalStorageArray. DziÍki tej klasie moøemy korzystaÊ z danych zapisanych w LocalStorage w sposÛb bardzo podobny do zwyk≥ej tablicy w jÍzyku JavaScript. Zaletπ takiego rozwiπzania jest zachowanie danych pomiÍdzy kolejnymi odwiedzeniami strony, podobnie jak w przypadku IndexedDB. Jest to niezbÍdne, poniewaø nie ma pewnoúci czy klient po≥πczy siÍ z Internetem przed wy≥πczniem przeglπdarki internetowej po skoÒczonej nauce. Dane w obiekcie LocalStorageArray o nazwie "decks" sπ ustawione przez obiekt "repository" w momencie zapisu do IndexedDB, a wiÍc dane znajdujπ siÍ jednoczeúnie w LocalStorage i IndexedDB do czasu synchronizacji. Po synchronizacji LocalStorageArray jest czyszczone.

W zmiennej "url" w lini 4 znajduje siÍ adres do metody kontrolera ASP.NET. Metoda ta przyjmuje dane w formacie JSON (ang. JavaScript Object Notation), ktÛre naleøy dodaÊ lub uaktualniÊ w bazie serwerowej i wyglπda nastÍpujπco:


\begin{lstlisting}
[HttpPost]
public JsonResult SynchronizeDecks(FormCollection formCollection)
{
    string decksJson = formCollection["json"];
    decksJson = HttpUtility.HtmlDecode(decksJson);

    var decks = JsonConvert.DeserializeObject<List<Deck>>(decksJson);

    try
    {
        foreach (var deck in decks)
        {
            var deckToSync = _db.Decks.FirstOrDefault(d =>
                d.UserId == WebSecurity.CurrentUserId
                && d.ClientId == deck.ClientId);

            if (deckToSync == null)
            {
                deck.UserId = WebSecurity.CurrentUserId;
                _db.Decks.Add(deck);
            }
            else
            {
                deckToSync.UserId = WebSecurity.CurrentUserId;
                deckToSync.Title = deck.Title;
            }
        }

        _db.SaveChanges();
    }
    catch (Exception ex)
    {
        return Json(new { success = false });
    }

    return Json(new { success = true });
}
\end{lstlisting}


W linii 4 i 5 pobieramy z kolekcji wartoúci wys≥anego formularza dane do synchronizacji i dekodujemy je. NastÍpnie z formatu JSON wykonujemy deserializacjÍ, czyli przekszta≥cenie danych z postaci tekstowej do struktury listy w jÍzyku C\#. NastÍpnie iterujemy po elementach tej listy. W linii 13 za pomocπ zapytania LINQ (ang. Language INtegrated Query) odwo≥ujemy siÍ do bazy. Zapytanie to jest zamienione na jÍzyk SQL dziÍki technologii EF (ang. Entity Framework). PrÛbujemy pobieraÊ w nim rekord przepisany do danego uøytkownika i o danym id w bazie po stronie klienta. W ten sposÛb w dalszej czÍúci kodu moøemy okreúliÊ czy dane naleøy dodaÊ - brak rekordu w bazie czy uaktualiniÊ - rekord znajduje siÍ juø w bazie. W linii 29 zapisujemy zmiany. Ca≥oúÊ wykonuje siÍ w bloku try-catch. W przypadku niepowodzenia zwracamy obiekt w notacji JSON z flagπ sygnalizujπcπ niepowodzenie.

Projektujπc mechanizm synchronizacji obs≥uøono na kaødym etapie sytuacjÍ braku dostÍpu do Internetu.  By rozwiπzaÊ problem niespÛjnoúci danych rekordy w bazie po stronie klienta (rys. \ref{fig:clientDbDiagram}) oraz po stronie serwerowej (rys. \ref{fig:dbDiagram}) zawierajπ pole "LastUpdateDate". Zapisana jest w nim informacji o dacie ostatniej aktualizacji danego rekordu. Data zapisana po stronie klienta to czas dodania rekordu, aktualizacji lub synchronizacji z serwerem. Data zapisana po stronie serwerowej to czas synchronizacji z bazπ IndexedDb. Na tej podstawie jest wnioskowane, ktÛre dane naleøy uaktualniÊ w bazie serwerowej z bazy po stronie przeglπdarkowej oraz jakie dane naleøy zsynchronizowaÊ z bazy serwerowej po stronie klienta. Zastosowano schemat, w ktÛrym dane po stronie klienta nie sπ oznaczane jako zsynchronizowane aø do momentu otrzymania od serwera flagi oznaczajπcej sukces zapisania danych do serwerowej bazy danych. Jeúli nie nadejdzie informacja od serwera (np. w przypadku braku dostÍpu do Internatu) lub serwer zwrÛci flagÍ niepowodzenia, oznacza to, øe øaden rekord nie zosta≥ zaktualizowany. Gwarantuje to transakcja bazodanowa.

\begin{figure}
  \centering
  \includegraphics[width=1.0\linewidth]{rys/ClientDbDiagram.png}
  \caption{Baza danych IndexedDb, po stronie przeglπdarki}
  \label{fig:clientDbDiagram}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[width=0.9\linewidth]{rys/DbDiagram.png}
  \caption{Diagram tabel z danymi zsynchronizowanymi z serwerem}
  \label{fig:dbDiagram}
  \zrodlo{Opracowanie w≥asne}
\end{figure}

\section{Generowanie manifestu AppCache}

By moøliwa by≥a praca aplikacji w trybie bez dostÍpu do Internetu naleøy utworzyÊ plik, ktÛry zawiera w sobie úcieøki do wszystkich plikÛw na serwerze, z ktÛrych sk≥ada siÍ aplikacja. Sπ to pliki o rozszerzeniach html, js, css oraz obrazki, stanowiπce szablon graficzny.


Nazwy plikÛw o rozszerzeniu html, css i js sπ ≥πczone automatycznie dla oszczÍdzenia liczby øπdaÒ do serwera. Dodawany jest rÛwnieø ContentHash z powodÛw opisanych w rozdziale "Visual Studio i ASP.NET jako úrodowisko pracy". W tej sytuacji kaøda zmiana treúci pliku zmusza programistÍ do zmiany manifestu AppCache. W celu automatyzacji tej czynnoúci uøyto technologii ASP.NET - "ASHX Handler", dziÍki niej pod adresem "/Handlers/Manifest.ashx" przeglπdarka internetowa pobierze manifest mimo, øe nie jest on fizycznie dostÍpny na dysku serwera. TreúÊ zawarta w manifeúcie jest wygenerowana dynamicznie, a nastÍpnie zapisana, dla zwiÍkszenia wydajnoúci w pamiÍci cache.


\section{Testy}

Aplikacja zosta≥a przetestowana na komputerze z systemem Windows 8 na przeglπdarkach internetowych Google Chrome 32 oraz Internet Explorer 11. Testy przeprowadzono rÛwnieø na smartphonie Samsung Galaxy S4 z system Android 4.3 na przeglπdarce internetowej Google Chrome 32.
\\

\noindent
NastÍpujπce scenariusze testowe zosta≥y wykonane i zakoÒczy≥y siÍ sukcesem:
\\

\noindent
Scenariusz 1
\begin{enumerate}
\item Uruchomienie aplikacji na przeglπdarce z wyczyszczonymi danymi (ciasteczka, historia, LocalStorage, IndexedDb) z dostÍpem do Internetu.
\item Za≥oøenie nowego konta.
\item Wprowadzenie trzech nowych talii.
\item Wprowadzenie nowych informacji do kaødej z talii.
\item Na ekranie z listπ talii powinny znajdowaÊ siÍ trzy pozycje.
\item RozpoczÍcie nauki informacji z pierwszej talii.
\item Przejúcie wszystkich informacji.
\item PowrÛt do listy talii, na ktÛrej powinny znajdowaÊ siÍ dwie pozycje.
\end{enumerate}

\noindent
\\
Scenariusz 2
\begin{enumerate}
\item Uruchomienie aplikacji nastÍpnego dnia na przeglπdarce ze scenariusza 2 bez dostÍpu do Internetu.
\item Na liúcie talii powinny wyúwietlaÊ siÍ trzy talie z informacjami do powtÛrki.
\item Wykonanie powtÛrki wszystkich informacji.
\item Na liúcie talii nie powinny wyúwietlaÊ siÍ øadne pozycje.
\item Pod≥πczenie dostÍpu do Internetu.
\item Powinna nastπpiÊ synchronizacja danych z serwerem.
\end{enumerate}

\noindent
\\
Scenariusz 3
\begin{enumerate}
\item Uruchomienie aplikacji na przeglπdarce z wyczyszczonymi danymi z dostÍpem do Internetu.
\item Zalogowanie na konto, ktÛre posiada zsynchronizowane z serwerem dane.
\item Po zalogowaniu powinny wyúwietliÊ siÍ wczeúniej zsynchronizowane dane.
\end{enumerate}

\noindent
\\
Przeprowadzono rÛwnieø testy w ktÛrych w≥πczano i wy≥πczano dostÍp do Internetu podczas dodawania nowego materia≥u oraz podczas powtÛrek.


\chapter{Podsumowanie}

Celem niniejszej pracy by≥o opracowanie aplikacji wspomagajπcej proces nauki poprzez inteligentne planowanie powtÛrek materia≥u. W tym celu zosta≥ w niej zaimplementowany szeroko wykorzystywany algorytm SuperMemo w wersji drugiej. Zrealizowane zosta≥y za≥oøone funkcjonalnoúci oraz nowoczesna forma. Wykorzystane zosta≥y wszelkie mechanizmy dostÍpne w nowoczesnych przeglπdarkach internetowych, takie jak baza danych po stronie przeglπdarki, alternatywa dla ciasteczek o nazwie LocalStorage czy praca aplikacji w trybie bez dostÍpu do Internetu. Uøycie tych funkcjonalnoúci pozwoli≥o na napisanie jednej aplikacji, ktÛrπ moøna uruchomiÊ na wszystkich platformach sprzÍtowych i systemach operacyjnych, na ktÛrych znajduje siÍ przeglπdarka internetowa wspierajπca standard HTML5. Zastosowano wiÍc metodÍ "Write once, run anywhere." - "Zaprojektuj raz, uruchamiaj wszÍdzie.".

By zachowaÊ przejrzystoúÊ kodu oraz zwiÍkszyÊ wydajnoúÊ podczas pracy nad aplikacjπ wybrano nowoczesne zintegrowane úrodowisko programistyczne - Visual Studio. W po≥πczeniu z platformπ webowπ ASP.NET przynios≥o to zadowalajπce rezultaty, ktÛre sπ trudne do uzyskania w konkurencyjnych úrodowiskach, takich jak na przyk≥ad PHP. W aplikacji postanowiono zadbaÊ o logicznπ strukturÍ warstwy klienckiej poprzez podzielenie jej na wiele plikÛw. DziÍki funkcjonalnoúci ASP.NET o nazwie "bundles" nie wzros≥a jednak liczba øπdaÒ do serwera.

Wybrana przed rozpoczÍciem prac architektura multiplatformowa pozwoli≥a na unikniÍcie projektowania oddzielnych aplikacji na g≥Ûwne platformy mobilne (iOS, Android, Windows Phone) oraz platformÍ PC. Pozwoli≥o to na zaoszczÍdzenie zasobÛw czasu podczas implementowania kolejnych funkcjonalnoúci.

Zaprojektowana aplikacja ma za zadanie staÊ siÍ konkurencjπ dla programu SuperMemo UX oraz Anki. Przewagπ nad tym pierwszym jest bezp≥atne korzystanie z aplikacji. W przeciwieÒstwie do programu Anki opisana w pracy witryna jest przyjazna dla uøytkownika oraz posiada ujednolicony interfejs graficzny.

FunkcjonaloúÊ do wdroøenia w przysz≥oúci to import i eksport danych z programÛw konkurencyjnych, przede wszystkim aplikacji Anki. Pozwoli to potencjalnym uøytkownikom na podjÍcie decyzji, ktÛra aplikacja w wiÍkszym stopniu spe≥nia ich oczekiwania. Jednoczeúnie da to uøytkownikowi moøliwoúÊ powrotu do konkurencyjnej aplikacji z zapisanym etapem nauki.


\begin{thebibliography}{99}

\bibitem{RWD}
Benjamin LaGrone, \emph{HTML5 and CSS3 Responsive Web Design Cookbook} -- PACKT Publishing, 2013

\bibitem{ProVS2012}
Bruce Johnson, \emph{Professional Visual Studio 2012} -- Wrox, 2012

\bibitem{ProAspNetMvc4}
Adam Freeman, \emph{Pro ASP.NET MVC 4} -- Apress, 2012, rozdzia≥ 24

\bibitem{ForgettingCurves}
Andrew Thomassen, \emph{Learning and Forgetting Curves : A Practical Study} -- University of Waikato

\bibitem{SuperMemoBook}
Piotr A. Wozniak, \emph{Optimization of learning} -- Master's Thesis

\bibitem{SuperMemoHistory}
http://www.supermemo.com/english/history.htm

\bibitem{SuperMemoImplementation}
http://www.supermemo.com/english/ol/sm2.htm

\bibitem{KrzywaZapominania}
http://zajaczkowski.org/2008/11/01/powtarzaj-i-odtwarzaj/

\end{thebibliography}


\listoffigures


\chapter*{Za≥πczniki}
\begin{enumerate}
\item P≥yta CD z niniejszπ pracπ w wersji elektronicznej.
\item Oúwiadczenie o oryginalnoúci pracy i moøliwoúci jej wykorzystania. 
\end{enumerate}


\end{document}

